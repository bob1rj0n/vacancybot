"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.phoneNumberScene = void 0;
const telegraf_1 = require("telegraf");
const messages_1 = require("../../../common/constant/messages");
const SceneName_1 = require("../../../common/constant/SceneName");
const user_model_1 = require("../../../common/db/model/user.model");
exports.phoneNumberScene = new telegraf_1.Scenes.BaseScene(SceneName_1.SceneNames.PHONE_NUMBER);
exports.phoneNumberScene.enter(async (ctx) => {
    let buttons = [];
    const language = ctx.session.language;
    buttons.push([telegraf_1.Markup.button.contactRequest(messages_1.Messages.PhoneButton[language])]);
    await ctx.replyWithHTML(messages_1.Messages.Phone[language], telegraf_1.Markup.keyboard(buttons).resize());
});
exports.phoneNumberScene.on("contact", async (ctx) => {
    const phone = ctx.message.contact.phone_number;
    await user_model_1.UserModel.updateOne({ userId: ctx.from.id }, { phoneNumber: phone });
    await ctx.scene.enter(SceneName_1.SceneNames.MAIN);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGhvbmUuc2NlbmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvYm90L3NuZWNlL3JlZ2lzdGVyL3Bob25lLnNjZW5lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUEwQztBQUMxQyxnRUFBNkQ7QUFDN0Qsa0VBQWdFO0FBQ2hFLG9FQUFnRTtBQUluRCxRQUFBLGdCQUFnQixHQUFHLElBQUksaUJBQU0sQ0FBQyxTQUFTLENBQVksc0JBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUV6Rix3QkFBZ0IsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQ2pDLElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUNqQixNQUFNLFFBQVEsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQTtJQUNyQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsaUJBQU0sQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLG1CQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBQzVFLE1BQU0sR0FBRyxDQUFDLGFBQWEsQ0FBQyxtQkFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRSxpQkFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO0FBQ3hGLENBQUMsQ0FBQyxDQUFDO0FBR0gsd0JBQWdCLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEVBQUU7SUFDekMsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDO0lBRS9DLE1BQU0sc0JBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0lBQzFFLE1BQU0sR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsc0JBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQTtBQUUxQyxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1vZGVsIH0gZnJvbSBcIm1vbmdvb3NlXCI7XHJcbmltcG9ydCB7IE1hcmt1cCwgU2NlbmVzIH0gZnJvbSBcInRlbGVncmFmXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2VzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdGFudC9tZXNzYWdlc1wiO1xyXG5pbXBvcnQgeyBTY2VuZU5hbWVzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9jb25zdGFudC9TY2VuZU5hbWVcIjtcclxuaW1wb3J0IHsgVXNlck1vZGVsIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9kYi9tb2RlbC91c2VyLm1vZGVsXCI7XHJcbmltcG9ydCB7IE15Q29udGV4dCB9IGZyb20gXCIuLi8uLi9wbHVnaW5zL2JvdC5wbHVnaW5cIjtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgcGhvbmVOdW1iZXJTY2VuZSA9IG5ldyBTY2VuZXMuQmFzZVNjZW5lPE15Q29udGV4dD4oU2NlbmVOYW1lcy5QSE9ORV9OVU1CRVIpO1xyXG5cclxucGhvbmVOdW1iZXJTY2VuZS5lbnRlcihhc3luYyAoY3R4KSA9PiB7XHJcbiAgICBsZXQgYnV0dG9ucyA9IFtdO1xyXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSBjdHguc2Vzc2lvbi5sYW5ndWFnZVxyXG4gICAgYnV0dG9ucy5wdXNoKFtNYXJrdXAuYnV0dG9uLmNvbnRhY3RSZXF1ZXN0KE1lc3NhZ2VzLlBob25lQnV0dG9uW2xhbmd1YWdlXSldKVxyXG4gICAgYXdhaXQgY3R4LnJlcGx5V2l0aEhUTUwoTWVzc2FnZXMuUGhvbmVbbGFuZ3VhZ2VdLCBNYXJrdXAua2V5Ym9hcmQoYnV0dG9ucykucmVzaXplKCkpXHJcbn0pO1xyXG5cclxuXHJcbnBob25lTnVtYmVyU2NlbmUub24oXCJjb250YWN0XCIsIGFzeW5jIChjdHgpID0+IHtcclxuICAgIGNvbnN0IHBob25lID0gY3R4Lm1lc3NhZ2UuY29udGFjdC5waG9uZV9udW1iZXI7XHJcblxyXG4gICAgYXdhaXQgVXNlck1vZGVsLnVwZGF0ZU9uZSh7IHVzZXJJZDogY3R4LmZyb20uaWQgfSwgeyBwaG9uZU51bWJlcjogcGhvbmUgfSlcclxuICAgIGF3YWl0IGN0eC5zY2VuZS5lbnRlcihTY2VuZU5hbWVzLk1BSU4pXHJcblxyXG59KTtcclxuXHJcbiJdfQ==